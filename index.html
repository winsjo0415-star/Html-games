<!--
© 2025 Winston Harry Roger Sjöstrand. All rights reserved.
See LICENSE file for full terms.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hype Html — Games</title>
  <style>
    :root{
      --side-collapsed:60px;
      --side-expanded:260px;
      --topbar-height:64px;
      --accent:#5b6cff;
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#9aa7bf;
      color-scheme: dark;
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e6eef8;background:linear-gradient(180deg,#08101a 0%, #071014 100%);} 

    /* Top bar */
    .topbar{
      position:fixed;left:0;right:0;top:0;height:var(--topbar-height);display:flex;align-items:center;gap:1rem;padding:0 1rem;background:rgba(6,10,18,0.7);backdrop-filter:blur(6px);box-shadow:0 2px 10px rgba(2,6,12,0.6);z-index:50;
    }
    .brand{
      display:flex;align-items:center;gap:.6rem;min-width:170px;
    }
    .brand .logo{
      width:38px;height:38px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#28d0ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:14px;box-shadow:0 2px 6px rgba(0,0,0,0.5);
    }
    .brand .title{font-weight:700;letter-spacing:.4px}

    .top-search{flex:1;display:flex;justify-content:center}
    .top-search input{width:60%;max-width:700px;background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:8px;color:inherit;outline:none}
    .top-actions{display:flex;align-items:center;gap:1rem}

    /* Side menu */
    .side-menu{
      position:fixed;left:0;top:var(--topbar-height);bottom:0;width:var(--side-collapsed);background:linear-gradient(180deg, rgba(8,12,20,0.9), rgba(6,8,15,0.92));overflow:hidden;transition:width 260ms ease;z-index:40;border-right:1px solid rgba(255,255,255,0.02);
    }
    .side-menu:hover{width:var(--side-expanded)}
    .side-inner{display:flex;flex-direction:column;height:100%;}
    .tags-search{padding:12px}
    .tags-search input{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}

    .tags-list{padding:8px 12px;flex:1;overflow:auto}
    .tag-item{height:48px;display:flex;align-items:center;padding:0 10px;margin-bottom:8px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02);cursor:pointer}
    .tag-item.placeholder{opacity:0.25}

    /* Make sure only one per row (single column) */
    .tags-list ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column}

    /* Main content area take remaining space */
    .main{margin-top:var(--topbar-height);margin-left:var(--side-collapsed);transition:margin-left 260ms ease;padding:24px}
    .side-menu:hover ~ .main{margin-left:var(--side-expanded)}

    /* Profile / login button & panels */
    .profile-btn{width:40px;height:40px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;background:transparent;border:1px solid rgba(255,255,255,0.04);cursor:pointer}

    .dropdown{position:absolute;right:1rem;top:calc(var(--topbar-height) + 10px);min-width:220px;background:linear-gradient(180deg,#071026,#06111d);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(0,0,0,0.6);display:none}
    .dropdown.show{display:block}

    .login-panel{position:absolute;right:1rem;top:calc(var(--topbar-height) + 10px);min-width:260px;background:linear-gradient(180deg,#071026,#06111d);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);display:none}
    .login-panel.show{display:block}
    .google-btn{display:flex;align-items:center;gap:.6rem;padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);cursor:pointer;border:1px solid rgba(255,255,255,0.03)}

    /* small helpers */
    .muted{color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:720px){
      .top-search input{width:90%}
      .side-menu:hover{width:200px}
      .side-menu{width:54px}
      .main{margin-left:54px}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">HH</div>
      <div>
        <div class="title">Hype Html</div>
        <div class="muted" style="font-size:12px">Play free HTML games</div>
      </div>
    </div>

    <div class="top-search">
      <input id="gameSearch" placeholder="Search for games" aria-label="Search for games">
    </div>

    <div class="top-actions">
      <div id="authArea">
        <!-- Filled by JS: shows either login button or profile -->
      </div>
    </div>
  </header>

  <nav class="side-menu" id="sideMenu" aria-label="Tags">
    <div class="side-inner">
      <div class="tags-search">
        <input id="tagSearch" placeholder="search for tags" aria-label="search for tags">
      </div>
      <div class="tags-list" id="tagsList" role="list" aria-label="Game tags">
        <ul id="tagsUl"></ul>
      </div>
    </div>
  </nav>

  <main class="main">
    <h1>Welcome to Hype Html</h1>
    <p class="muted">This is a starter layout. Add your games (HTML files/iframes) into the main area.</p>

    <section id="gamesArea" style="margin-top:20px">
      <!-- Placeholder for games grid -->
      <div class="muted">(Games will appear here)</div>
    </section>
  </main>

  <!-- Dropdowns -->
  <div id="profileDropdown" class="dropdown" aria-hidden="true">
    <div style="display:flex;align-items:center;gap:.6rem">
      <div style="width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#28d0ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:white">U</div>
      <div>
        <div id="profileName">Username</div>
        <div class="muted" style="font-size:12px">Member</div>
      </div>
    </div>
    <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:10px 0">
    <div>
      <div class="muted">Time on site</div>
      <div id="timeOnSite">0s</div>
    </div>
    <div style="margin-top:10px;display:flex;gap:8px">
      <button id="signOutBtn" style="padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);cursor:pointer">Sign out</button>
    </div>
  </div>

  <div id="loginPanel" class="login-panel" aria-hidden="true">
    <div class="muted">Sign in to save progress and favorites</div>
    <div style="height:10px"></div>
    <div id="googleSignBtn" class="google-btn" role="button" tabindex="0">
      <!-- This is a mock Google button for demo. Replace with Google's Identity Services for production. -->
      <svg width="20" height="20" viewBox="0 0 533.5 544.3" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M533.5 278.4c0-17.8-1.6-35.1-4.7-51.8H272v98.1h146.8c-6.3 33.8-25.1 62.5-53.8 81.7v67.9h86.9c50.9-46.9 80.6-116 80.6-195.9z" fill="#4285f4"/><path d="M272 544.3c73.8 0 135.8-24.4 181.1-66.2l-86.9-67.9c-24.1 16.2-54.9 25.7-94.2 25.7-72 0-133-48.6-154.9-114.1H29.9v71.7C75 482.7 167.4 544.3 272 544.3z" fill="#34a853"/><path d="M117.1 322.8c-11.7-34.5-11.7-71.7 0-106.2V145h-87.1C6.7 198.1 0 235.7 0 272.1s6.7 74 30 127.1l87.1-76.4z" fill="#fbbc04"/><path d="M272 107.6c39.3 0 74.6 13.6 102.4 40.4l76.7-76.7C408 24.5 345.9 0 272 0 167.4 0 75 61.6 29.9 154.8l87.1 71.7C139 156.2 200 107.6 272 107.6z" fill="#ea4335"/></svg>
      <div>Sign in with Google (demo)</div>
    </div>
    <div style="margin-top:10px;font-size:13px" class="muted">This demo uses a mock button. To enable real Google Sign-In, replace the mock with Google's Identity Services and provide your client ID. See the comments in the source.</div>
  </div>

  <script>
    // Populate 20 tag slots; only 'Shooter' for now as requested
    const tagsUl = document.getElementById('tagsUl');
    const tags = [];
    tags.push({name:'Shooter'});
    for(let i=1;i<20;i++) tags.push({name:''}); // placeholders

    function renderTags(filter=''){
      tagsUl.innerHTML='';
      const filtered = tags.filter(t => (t.name || '').toLowerCase().includes(filter.toLowerCase()));
      // We still want to show 20 rows even if filtered, so iterate fixed 20 slots
      for(let i=0;i<20;i++){
        const t = tags[i] || {name:''};
        const li = document.createElement('li');
        li.className = 'tag-item' + (t.name? '':' placeholder');
        li.textContent = t.name || ' '; // keep height even if empty
        li.setAttribute('role','listitem');
        li.addEventListener('click', ()=>{
          if(!t.name) return;
          document.getElementById('gameSearch').focus();
          // You could filter games by tag here
          alert('Clicked tag: '+t.name);
        });
        tagsUl.appendChild(li);
      }
    }
    renderTags();

    // Tag search input
    document.getElementById('tagSearch').addEventListener('input', (e)=>{
      const q = e.target.value.trim();
      // For now we'll just highlight matching tag if any
      const lis = tagsUl.querySelectorAll('li');
      lis.forEach((li,idx)=>{
        const t=tags[idx]||{name:''};
        if(t.name && q && t.name.toLowerCase().includes(q.toLowerCase())){
          li.style.borderColor = 'rgba(91,108,255,0.9)';
          li.scrollIntoView({behavior:'smooth',block:'center'});
        } else {
          li.style.borderColor = 'transparent';
        }
      })
    });

    // AUTH UI handling (demo mode)
    const authArea = document.getElementById('authArea');
    const profileDropdown = document.getElementById('profileDropdown');
    const loginPanel = document.getElementById('loginPanel');

    function renderAuth(){
      authArea.innerHTML='';
      const user = JSON.parse(localStorage.getItem('hype_user')||'null');
      if(user){
        // show profile button
        const btn = document.createElement('button');
        btn.className='profile-btn';
        btn.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zM12 14c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z" stroke="white" stroke-width="0.8"/></svg>`;
        btn.title = 'Profile';
        btn.addEventListener('click',(ev)=>{
          ev.stopPropagation();
          // toggle dropdown
          const shown = profileDropdown.classList.toggle('show');
          loginPanel.classList.remove('show');
          if(shown){
            profileDropdown.setAttribute('aria-hidden','false');
            // update details
            document.getElementById('profileName').textContent = user.name || 'Player';
          } else profileDropdown.setAttribute('aria-hidden','true');
        });
        authArea.appendChild(btn);
      } else {
        // show login button
        const btn = document.createElement('button');
        btn.className='profile-btn';
        btn.textContent='Log in';
        btn.addEventListener('click',(ev)=>{
          ev.stopPropagation();
          loginPanel.classList.toggle('show');
          profileDropdown.classList.remove('show');
        });
        authArea.appendChild(btn);
      }
    }
    renderAuth();

    // clicking outside: close panels
    window.addEventListener('click', ()=>{
      profileDropdown.classList.remove('show');
      loginPanel.classList.remove('show');
    });
    // prevent clicks inside dropdowns closing them
    profileDropdown.addEventListener('click', (e)=>e.stopPropagation());
    loginPanel.addEventListener('click', (e)=>e.stopPropagation());

    // Mock google sign in logic — replace with real Google Identity API in production
    document.getElementById('googleSignBtn').addEventListener('click', ()=>{
      // For demo create a fake user
      const user = {name:'Demo User',email:'demo@example.com',signedAt:Date.now()};
      localStorage.setItem('hype_user',JSON.stringify(user));
      renderAuth();
      loginPanel.classList.remove('show');
      alert('Signed in (demo). In a real site, implement Google Identity Services and replace this mock.');
    });

    document.getElementById('signOutBtn').addEventListener('click', ()=>{
      localStorage.removeItem('hype_user');
      renderAuth();
      profileDropdown.classList.remove('show');
    });

    // Time-on-site tracking (saved every 5 seconds)
    // We'll store a session start time and accumulated seconds in localStorage keys: hype_session_start and hype_session_acc
    function initSessionTimer(){
      let start = parseInt(localStorage.getItem('hype_session_start')||'0',10);
      let acc = parseInt(localStorage.getItem('hype_session_acc')||'0',10);
      if(!start){ start = Date.now(); localStorage.setItem('hype_session_start', String(start)); }

      function formatSeconds(s){
        const hrs = Math.floor(s/3600); s%=3600; const mins = Math.floor(s/60); const secs = s%60;
        return (hrs?hrs+'h ':'') + (mins?mins+'m ':'') + secs+'s';
      }

      setInterval(()=>{
        const now = Date.now();
        const elapsed = Math.floor((now - start)/1000) + acc;
        document.getElementById('timeOnSite').textContent = formatSeconds(elapsed);
      },1000);

      // save every 5 seconds: keep 'acc' as previous accumulated plus elapsed since start, then reset start
      setInterval(()=>{
        const now = Date.now();
        const elapsed = Math.floor((now - start)/1000);
        acc = acc + elapsed;
        start = now;
        localStorage.setItem('hype_session_acc', String(acc));
        localStorage.setItem('hype_session_start', String(start));
        // also save user (if any) periodically to simulate auto-saving
        const user = JSON.parse(localStorage.getItem('hype_user')||'null');
        if(user){
          user.lastSaved = Date.now();
          localStorage.setItem('hype_user', JSON.stringify(user));
        }
      },5000);
    }
    initSessionTimer();

    // small accessibility: pressing Esc closes
    window.addEventListener('keydown',(e)=>{ if(e.key==='Escape'){ profileDropdown.classList.remove('show'); loginPanel.classList.remove('show'); } });

    // Notes in code for production:
    /*
      - To implement real Google Sign-In:
        1) Get a client ID from Google Cloud (OAuth 2.0 credentials)
        2) Replace the mock googleSignBtn handler with Google's Identity Services initialization
           and call google.accounts.id.initialize(...) and .prompt() or render a button.
        3) On successful credential callback, store the user profile (id_token) securely and
           send to your backend if you have one.

      - The session "time on site" is saved to localStorage every 5 seconds as requested.
      - This is a static demo: when integrating into GitHub Pages, you can keep this single
        HTML file (or split into separate assets). If you host game HTML files, load them into
        the main area (e.g. with iframes) and add search/filter logic to the tag and game searches.
    */

  </script>
</body>
</html>
