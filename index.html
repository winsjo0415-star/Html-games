<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Game Hub</title>
<style>
  /* Reset & Base */
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Arial', sans-serif; background: #1a1a1a; color: #fff; overflow-x: hidden; }
  a { color: inherit; text-decoration: none; }

  /* Header */
  header { display: flex; justify-content: space-between; align-items: center; padding: 15px 30px; background: #222; position: sticky; top:0; z-index: 100; }
  header h1 { font-size: 1.8em; }
  .search-bar { padding: 10px; width: 300px; border-radius: 5px; border: none; outline: none; }
  .profile-btn { width: 40px; height: 40px; border-radius: 50%; cursor: pointer; overflow: hidden; position: relative; }
  .profile-btn img { width: 100%; height: 100%; object-fit: cover; }

  /* Profile Dropdown */
  .profile-menu { position: absolute; right: 0; top: 50px; background: #2a2a2a; border-radius: 10px; overflow: hidden; display: none; flex-direction: column; min-width: 180px; }
  .profile-menu div, .profile-menu button { padding: 10px 15px; cursor: pointer; }
  .profile-menu div:hover, .profile-menu button:hover { background: #333; }

  /* Sidebar */
  .sidebar { width: 200px; background: #222; padding: 20px; position: fixed; top: 70px; bottom:0; overflow-y:auto; }
  .sidebar h3 { margin-bottom: 10px; }
  .sidebar button { width: 100%; padding: 8px 10px; margin-bottom: 10px; border: none; border-radius: 5px; cursor: pointer; background: #333; color:#fff; transition: 0.2s; }
  .sidebar button:hover { background: #444; }

  /* Main */
  main { margin-left: 220px; padding: 20px; display: flex; flex-wrap: wrap; justify-content: flex-start; gap: 20px; }

  /* Game Card */
  .game-card { background: #222; width: 200px; border-radius: 10px; overflow: hidden; cursor: pointer; display:flex; flex-direction: column; transition: 0.3s; position: relative; }
  .game-card:hover { transform: scale(1.05); box-shadow: 0 0 20px #000; }
  .game-card img { width: 100%; height: 120px; object-fit: cover; }
  .game-card .content { padding: 10px; flex-grow: 1; display:flex; flex-direction:column; justify-content:space-between; }
  .game-card h4 { margin-bottom: 5px; font-size: 1.1em; }
  .tags { font-size: 0.8em; color: #aaa; margin-bottom: 8px; }
  .card-buttons { display:flex; justify-content: space-between; align-items: center; }
  .play-btn, .menu-btn { padding: 5px 10px; border:none; border-radius:5px; cursor:pointer; background:#444; color:white; transition:0.2s; }
  .play-btn:hover, .menu-btn:hover { background:#555; }
  .menu-btn { border-radius:50%; width:32px; height:32px; display:flex; align-items:center; justify-content:center; font-weight:bold; }

  /* Ellipsis Menu */
  .ellipsis-menu { position: absolute; top: 40px; right: 10px; background:#333; border-radius:10px; display:none; flex-direction: column; min-width: 120px; }
  .ellipsis-menu button { padding:8px 12px; text-align:left; border:none; background:none; color:#fff; cursor:pointer; }
  .ellipsis-menu button:hover { background:#444; }

  /* Favorites */
  .favorite { position:absolute; top:10px; right:10px; font-size:20px; color:gold; cursor:pointer; display:none; }

  /* Game Iframe Overlay */
  #gameContainer { position: fixed; top:0; left:0; width:100%; height:100%; background:black; display:none; flex-direction:column; z-index:999; }
  #gameContainer iframe { flex-grow:1; width:100%; border:none; }
  #gameContainer .controls { background:#111; padding:10px; display:flex; justify-content:center; gap:10px; }
  #gameContainer button { padding:10px 15px; border:none; border-radius:5px; cursor:pointer; background:#444; color:white; }
  #gameContainer button:hover { background:#666; }

</style>
</head>
<body>

<header>
  <h1>Ultimate Game Hub</h1>
  <input type="text" id="searchBar" class="search-bar" placeholder="Search games...">
  <div class="profile-btn" id="profileBtn">
    <img src="https://via.placeholder.com/40" alt="Profile">
    <div class="profile-menu" id="profileMenu">
      <div>Total time spent: <span id="timeSpent">0</span>s</div>
      <button id="signOutBtn">Sign out</button>
    </div>
  </div>
</header>

<div class="sidebar">
  <h3>Tag Search</h3>
  <input type="text" id="tagSearch" placeholder="Filter tags..." style="width:100%;padding:5px;margin-bottom:10px;border-radius:5px;border:none;">
  <button class="tag-btn" data-tag="all">All Games</button>
  <button class="tag-btn" data-tag="shooter">Shooter</button>
  <button class="tag-btn" data-tag="2player">2 Player</button>
  <button class="tag-btn" data-tag="simulator">Simulator</button>
  <button class="tag-btn" data-tag="website">Website</button>
</div>

<main id="gameGrid"></main>

<div id="gameContainer">
  <div class="controls">
    <button id="backBtn">Back</button>
    <button id="fullscreenBtn">Fullscreen</button>
  </div>
  <iframe id="gameFrame" allowfullscreen></iframe>
</div>

<script>
const games = [
  {
    name: "Geometry Dash",
    url: "games/geometry dash.html",
    image: "images/geometrydash-icon.png",
    tags: ["website"],
    description: "Block jumping"
  },
  {
    name: "CloudMoonApp",
    url: "https://web.cloudmoonapp.com/",
    image: "images/cloudmoonapp-icon.png",
    tags: ["website"],
    description: "Cloud gaming service"
  }
];

let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
let timeSpent = 0;
let currentGame = null;
let autoSaveInterval = null;

const gameGrid = document.getElementById('gameGrid');
const searchBar = document.getElementById('searchBar');
const tagSearch = document.getElementById('tagSearch');
const gameContainer = document.getElementById('gameContainer');
const gameFrame = document.getElementById('gameFrame');
const backBtn = document.getElementById('backBtn');
const fullscreenBtn = document.getElementById('fullscreenBtn');

function renderGames() {
  gameGrid.innerHTML = '';
  const nameFilter = searchBar.value.toLowerCase();
  const tagFilter = tagSearch.value.toLowerCase();

  games.forEach(game => {
    const matchesName = game.name.toLowerCase().includes(nameFilter);
    const matchesTag = tagFilter === '' || game.tags.some(t=>t.toLowerCase().includes(tagFilter));

    if (matchesName && matchesTag){
      const card = document.createElement('div');
      card.className = 'game-card';

      const favStar = document.createElement('div');
      favStar.className = 'favorite';
      favStar.innerHTML = '★';
      if(favorites.includes(game.name)) favStar.style.display='block';
      favStar.addEventListener('click', e=>{
        e.stopPropagation();
        if(favorites.includes(game.name)){
          favorites = favorites.filter(f=>f!==game.name);
          favStar.style.display='none';
        } else {
          favorites.push(game.name);
          favStar.style.display='block';
        }
        localStorage.setItem('favorites', JSON.stringify(favorites));
      });
      card.appendChild(favStar);

      const img = document.createElement('img');
      img.src = game.image;
      card.appendChild(img);

      const content = document.createElement('div');
      content.className = 'content';

      const title = document.createElement('h4');
      title.textContent = game.name;
      content.appendChild(title);

      const tags = document.createElement('div');
      tags.className = 'tags';
      tags.textContent = game.tags.join(', ');
      content.appendChild(tags);

      const buttons = document.createElement('div');
      buttons.className = 'card-buttons';

      const playBtn = document.createElement('button');
      playBtn.className='play-btn';
      playBtn.textContent='Play';
      playBtn.addEventListener('click', ()=>{
        currentGame = game;
        gameFrame.src = game.url;
        gameContainer.style.display='flex';
        document.body.style.overflow='hidden';
      });
      buttons.appendChild(playBtn);

      const menuBtn = document.createElement('button');
      menuBtn.className='menu-btn';
      menuBtn.textContent='⋮';
      buttons.appendChild(menuBtn);

      const ellipsisMenu = document.createElement('div');
      ellipsisMenu.className='ellipsis-menu';
      const descBtn = document.createElement('button');
      descBtn.textContent='Description';
      descBtn.addEventListener('click', e=>{
        e.stopPropagation();
        alert(game.description);
      });
      const favBtn = document.createElement('button');
      favBtn.textContent='Favorite';
      favBtn.addEventListener('click', e=>{
        e.stopPropagation();
        if(favorites.includes(game.name)){
          favorites = favorites.filter(f=>f!==game.name);
        } else {
          favorites.push(game.name);
        }
        localStorage.setItem('favorites', JSON.stringify(favorites));
        renderGames();
      });
      ellipsisMenu.appendChild(descBtn);
      ellipsisMenu.appendChild(favBtn);
      menuBtn.appendChild(ellipsisMenu);

      menuBtn.addEventListener('mouseenter', ()=>{ ellipsisMenu.style.display='flex'; });
      menuBtn.addEventListener('mouseleave', ()=>{ ellipsisMenu.style.display='none'; });

      content.appendChild(buttons);
      card.appendChild(content);
      gameGrid.appendChild(card);
    }
  });
}

searchBar.addEventListener('input', renderGames);
tagSearch.addEventListener('input', renderGames);
document.querySelectorAll('.tag-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tagSearch.value = btn.dataset.tag==='all'?'':btn.dataset.tag;
    renderGames();
  });
});

backBtn.addEventListener('click', ()=>{
  gameContainer.style.display='none';
  gameFrame.src='';
  document.body.style.overflow='auto';
});

fullscreenBtn.addEventListener('click', ()=>{
  if(gameFrame.requestFullscreen) gameFrame.requestFullscreen();
});

const profileBtn = document.getElementById('profileBtn');
const profileMenu = document.getElementById('profileMenu');
profileBtn.addEventListener('click', ()=>{
  profileMenu.style.display = profileMenu.style.display==='flex'?'none':'flex';
});

// Time spent counter
setInterval(()=>{
  timeSpent++;
  document.getElementById('timeSpent').textContent = timeSpent;
},1000);

renderGames();
</script>

</body>
</html>
